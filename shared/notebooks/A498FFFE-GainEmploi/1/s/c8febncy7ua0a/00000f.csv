"0","#| label: fig-minima"
"0","#| fig-cap: Evolution des mimina sociaux et du Smic horaire, base 100 en 1990"
"0","#| fig-asp: 0.8"
"0",""
"0",""
"0","Bareme <- read_excel(""data/DREES-BaremesMS.xlsx"")"
"0","Bareme <-Bareme %>% mutate_all(as.numeric)"
"0",""
"0","IPC2015 <- ""https://www.bdm.insee.fr/series/sdmx/data/SERIES_BDM/001763852"" %>%"
"0","  readSDMX %>%"
"0","  as_tibble"
"0",""
"0","IPC <- IPC2015 %>%  "
"0","  mutate("
"0","  OBS_VALUE=as.numeric(OBS_VALUE),"
"0","  TIME=ym(TIME_PERIOD),"
"0","  year=year(TIME),"
"0","  month=month(TIME),"
"0","   ) %>%  "
"0","   select(TIME,year, month,OBS_VALUE)  %>% "
"0","   filter(month==1)"
"0",""
"0","Bareme_IPC <- left_join(Bareme, IPC, by=""year"")"
"0",""
"0","Bareme_IPC <- Bareme_IPC %>% "
"0","  mutate("
"0","    IPC2015=OBS_VALUE,"
"0","    RMIcst=RMI/IPC2015*100,"
"0","    AAHcst=AAH/IPC2015*100,"
"0","    ASPAcst=ASPA/IPC2015*100,"
"0","    SMICcst=(SMIC)/IPC2015*100,"
"0","  )  "
"0",""
"0","annee_ref <- 1990"
"0",""
"0","# Transformation en base 100"
"0",""
"0","Bareme_base100 <- Bareme_IPC %>%"
"0","  mutate("
"0","    ""RMI/RSA"" = (RMIcst / RMIcst[year == annee_ref]) * 100,"
"0","    ""AAH"" = (AAHcst/AAHcst[year==annee_ref]*100),"
"0","    ""ASPA"" = (ASPAcst/ASPAcst[year==annee_ref]*100),"
"0","    ""SMIC horaire"" = (SMICcst/SMICcst[year==annee_ref]*100)"
"0","  )"
"0",""
"0","Bareme_long <- pivot_longer("
"0","  Bareme_base100,"
"0","  cols = c(""SMIC horaire"", ""AAH"", ""ASPA"", ""RMI/RSA""), "
"0","  names_to = ""variables"", "
"0","  values_to =""valeurs"") %>% "
"0","  select(year, variables, valeurs) %>% "
"0","  filter(year>1989)"
"0",""
"0","Bareme_long$variables<-factor(Bareme_long$variables, levels=rev(c(""RMI/RSA"", ""ASPA"", ""AAH"", ""SMIC horaire"")))"
"0",""
"0",""
"0","#Graphique"
"0",""
"0",""
"0","graphMS <- Bareme_long %>%"
"0","    ggplot() +"
"0","  aes(x = year, y = valeurs, color = variables) +"
"0","  geom_line() +"
"0","  geom_point_interactive("
"0","    aes(tooltip = paste(""Ann√©e:   "", year, ""   ;"", variables, "": "", round(valeurs, 0))),"
"0","    size = 2"
"0","  ) +"
"0","  scale_color_brewer(palette = ""Set2"")+ "
"0","  labs(x="""", y="""")+"
"0","  theme("
"0","    text = element_text(size=8),"
"0","    legend.title = element_blank(),"
"0","        ) +"
"0","  ofce_caption(source =""DREES"")"
"0",""
"0","girafy(graphMS)"
