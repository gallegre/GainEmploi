"0",""
"0","castyp<-read.xlsx(file=""cas types smic.xlsx"",sheetName = ""synthese"") "
"0",""
"0","base<-castyp %>% "
"0","  mutate("
"0","    casconj=case_when(isocou==""isol√©"" ~ ""Sans conjoint"","
"0","                  isocou==""couple"" & actconj==""Inactif"" ~ ""Conjoint sans revenu"","
"0","                  isocou==""couple"" & actconj==""Ch√¥meur"" ~ ""Conjoint ch√¥meur"","
"0","                  isocou==""couple"" & actconj==""1 smic"" ~ ""Conjoint salari√© au smic"","
"0","                  TRUE ~ ""Conjoint salari√© √† 1,5 smic""),"
"0","    enf=case_when(nbenf==0 ~ ""0 enfant"","
"0","                  nbenf==1 ~ ""1 enfant"","
"0","                  nbenf==2 ~ ""2 enfants"","
"0","                  TRUE ~ ""3 enfants""),"
"0","    cas=paste0(casconj,"" - "",enf),"
"0","    act=case_when(activite<1 ~ 100*activite,"
"0","                  Salaire==smic ~ 100,"
"0","                  TRUE ~ 150)"
"0","    ) %>% "
"0","  select(casconj,enf,cas,Salaire,act,NVIE) "
"0",""
"0","seuilpm=1309"
"0",""
"0","basegr<-base %>% filter(act==50)"
"0",""
"0","basegr$enf <-factor(basegr$enf, levels=c(""0 enfant"",""1 enfant"",""2 enfants"",""3 enfants""))"
"0",""
"0","basegr$casconj <- factor(basegr$casconj,levels=c(""Sans conjoint"",""Conjoint sans revenu"","
"0","                                               ""Conjoint ch√¥meur"",""Conjoint salari√© au smic"","
"0","                                           ""Conjoint salari√© √† 1,5 smic""))"
"0",""
"0","graphtppm <- ggplot() +"
"0","  geom_point(data=basegr, aes(x = casconj, y = NVIE, colour = enf, text = paste(""Revenu disponible:"", round(NVIE, 0),""euros"")"
"0","  ), size = 3) +  "
"0","    geom_hline("
"0","  aes(yintercept = (4/6)*seuilpm, linetype = ""Seuil de grande pauvret√© mon√©taire""),color = ""grey40"",linewidth = 0.5"
"0","  )+"
"0","    geom_hline("
"0","      aes(yintercept = seuilpm,linetype = ""Seuil de pauvret√© mon√©taire""),"
"0","    color = ""grey40"",linewidth = 0.5"
"0","    )+"
"0","  scale_linetype_manual(name = """", values = c(""Seuil de pauvret√© mon√©taire"" = ""solid"", ""Seuil de grande pauvret√© mon√©taire"" = ""dashed""),"
"0","                        limits = c(""Seuil de pauvret√© mon√©taire"", ""Seuil de grande pauvret√© mon√©taire""))+"
"0","    guides("
"0","    colour = guide_legend(order = 1),  # La l√©gende des couleurs en premier"
"0","    linetype = guide_legend(order = 2) # La l√©gende des lignes en dernier"
"0","  ) +"
"0","  theme_minimal() +"
"0","  scale_y_continuous(limits = c(0, 2000)) + "
"0","  theme("
"0","    axis.title.x = element_blank(),"
"0","    axis.title.y = element_blank(),"
"0","    legend.title = element_blank(),"
"0","    legend.text = element_text(size = rel(1)),"
"0","    plot.margin = margin(t = 20, r = 10, b = 20, l = 10),"
"0","    axis.line = element_line(color = ""black"", linewidth = 0.2, linetype = ""solid""),"
"0","    axis.text.x = element_text(size = rel(1), angle = 40, hjust = 1, vjust = 1),"
"0","    plot.title = element_text(size = rel(1.1), color=""#5E4FA2"")"
"0","  )"
"2","Avis : [38;5;232mIgnoring unknown aesthetics: [32mtext[38;5;232m[39m"
"0","igraphtppm <- girafe("
"0","  ggobj = graphtppm,"
"0","  options = list("
"0","    opts_tooltip("
"0","      css = """
"0","        background-color: red ;"
"0","        color: white;"
"0","        padding: 6px;"
"0","        border-radius: 4px;"
"0","        font-size: 20px;"
"0","      """
"0","    )"
"0","  )"
"0",")"
"0",""
"0",""
"0","# igraphtppm<-ggplotly(graphtppm, tooltip=""text"","
"0","#                        width = 900,   # largeur en pixels (√† ajuster)"
"0","#     height = 600,  # hauteur en pixels (√† ajuster)"
"0","#      legend = list("
"0","#       orientation = 'v',"
"0","#       x = 1,"
"0","#       xanchor = 'left',"
"0","#       y = 0.5,"
"0","#       title = list(text = """"),"
"0","#       itemwidth=60,"
"0","#       traceorder='normal'"
"0","#     )"
"0","#      ) "
"0",""
"0",""
"0","igraphtppm"
