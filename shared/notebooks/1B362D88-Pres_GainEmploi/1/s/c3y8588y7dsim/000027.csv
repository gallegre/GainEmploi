"0",""
"0","castypp<-read.xlsx(file=""Sorties_Privation.xlsx"",sheetName = ""Sorties_Privation"")"
"0",""
"0","base <- castypp %>%"
"0","pivot_longer(cols = c(TX_PAUVRETE, TX_ISO_PAUVRETE, TX_COU_PAUVRETE), names_to = ""cas"", values_to = ""taux"") %>%"
"0","  select(modalite, cas, taux) %>%"
"0","  filter(modalite!=""Ensemble"")"
"0",""
"0",""
"0","base <- base %>%"
"0","  mutate(cas = fct_recode(cas,"
"0","                              ""Ensemble"" = ""TX_PAUVRETE"","
"0","                              ""C√©libataire"" = ""TX_ISO_PAUVRETE"", "
"0","                              ""En couple""= ""TX_COU_PAUVRETE"" ),"
"0","         taux=taux*100)"
"0",""
"0","base$modalite<-factor(base$modalite, levels=c(""moins de 0,3 smic"", ""[0,3 √† 0,6["", ""[0,6 √† 0,9["", ""[0,9 √† 1,2["", ""[1,2 √† 1,5["", ""[1,5 √† 1,8["", ""1,8 smic et plus""))"
"0",""
"0",""
"0","graphG <- ggplot() +"
"0","  geom_col(data = base, aes(x = modalite, y = taux, fill = cas,"
"0","                            text = paste(""cas: "", cas, ""<br>salaire:"", modalite, ""<br>taux de pauvret√©: "", round(taux,1),""%"""
"0","                                         )), "
"0","           position = position_dodge(width = 0.6),  # Position des barres"
"0","           width = 0.4) +  # Largeur des barres"
"0","  theme_minimal() +"
"0","  scale_fill_brewer(palette = ""Spectral"") +"
"0","  scale_y_continuous(limits = c(0, 51)) +"
"0","  #scale_x_discrete(expand = expansion(add = c(0.5, 0.5))) + "
"0","  labs(title = ""Source SRCV 2022"","
"0","       x = ""Revenu en tranche de Smic"","
"0","       y = ""Taux de pauvret√© mon√©taire"",fill="""") + "
"0","  theme("
"0","    legend.position = ""right"","
"0","    legend.title = element_blank(),"
"0","    legend.text = element_text(size = rel(1)),  "
"0","    axis.title.x = element_text(size = rel(0.8)),  "
"0","    axis.title.y = element_text(size = rel(0.8)), "
"0","    axis.text.x = element_text(angle = 45, hjust = 1, size = rel(0.8)),"
"0","    plot.title = element_text(size = 12, color = ""#FDAE61"", face = ""bold"")"
"0","    )+"
"0","  guides(fill = guide_legend(nrow = 3))   "
"2","Avis : [38;5;232mIgnoring unknown aesthetics: [32mtext[38;5;232m[39m"
"0","graphGi <- ggplotly(graphG, tooltip = ""text"","
"0","    width = 800,   # largeur en pixels (√† ajuster)"
"0","    height = 550,  # hauteur en pixels (√† ajuster)"
"0","         legend = list("
"0","      orientation = 'v',"
"0","      x = 1,"
"0","      xanchor = 'left',"
"0","      y = 1,"
"0","      title = list(text = """"),"
"0","      itemwidth=60,"
"0","      traceorder='normal'"
"0","    )"
"0","  )"
"0",""
"0",""
"0","# igraphGi <- girafe("
"0","#   ggobj = graphG,"
"0","#   options = list("
"0","#     opts_tooltip("
"0","#       css = """
"0","#         background-color: red ;"
"0","#         color: white;"
"0","#         padding: 6px;"
"0","#         border-radius: 4px;"
"0","#         font-size: 20px;"
"0","#       """
"0","#     )"
"0","#   )"
"0","# )"
"0",""
"0","graphGi"
